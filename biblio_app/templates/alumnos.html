<!DOCTYPE html>
 {% extends "index.html" %}
 {% load static %}

 {% block main_content %}
<div class="container-flex text-center justify-content-center allign-items-center" style="padding-top: 20px;">
    <div class="row justify-content-center align-middle" style="margin-top: 10px; height:60px;">
    <div class="col-md-4 text-center">
        <h4 style="margin-top: 15px;"> Registra un nuevo alumno</h4>
    </div>
    <div class="col-md-8">
        <h4>Buscar Alumnos</h4>
    </div>
    </div>
</div>
<div class="row">
    <div class="col-md-4">
        <div class="container" style="overflow-y: auto; height: 600px;">
            <form class="d-flex" action="/alumno/agregar" method="post">
                {%csrf_token%}
                <table class="table">
                    <tr>
                        <td style="text-align:left; vertical-align:middle; padding-left:15px;">Nombre : </td>
                        <td><input type="text" class="form-control" name="nombre"></td>
                    </tr>
                    <tr>
                        <td style="text-align:left; vertical-align:middle; padding-left:15px;">Apellido : </td>
                        <td><input type="text" class="form-control" name="apellido"></td>
                    </tr>
                    <tr>
                        <td style="text-align:left; vertical-align:middle; padding-left:15px;">Clave estudiante : </td>
                        <td><input type="text" class="form-control" name="clave"></td>
                    </tr>
                    <tr>
                        <td style="text-align:left; vertical-align:middle; padding-left:15px;">Grupo : </td>
                        <td><input type="text" class="form-control" name="grupo"></td>
                    </tr>
                    {% if user.is_authenticated %}
                    <tr>
                        <td colspan="2" style="align-items: center; align-self: center;"><button class="btn btn-primary" type="submit" style="align-self: center;"> Agregar alumno</button></td>
                    </tr>
                    {%endif%}
                </table>
            </form>
            {% if user.is_authenticated %}
            <form class="d-flex" action="/alumno/cargar_excel" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="file" name="excel_file">
                <button class="btn btn-primary" type="submit" style="align-self: center;"> Cargar desde Excel</button>
            </form>            
            <button class="btn btn-danger" type="button"> Fin de curso</button>
            {% endif %}
        </div>
    </div>
    <div class="col-md-8">
        <div class="row">
           <nav class="navbar bg-body-light">
            <div class="container-fluid justify-content-center align-items-center">
                <form class="d-flex" role="search" action="alumno" method="get">
                    <input class="form-control me-2" type="search" placeholder="Buscar" aria-label="Search" name="q" value="{{ request.GET.q }}">
                    <button class="btn btn-outline-success" type="submit">Buscar</button>
                </form>
            </div>
            </nav>
            <div class="row" style="margin-top: 20 px;">
                <p>{{alumnos|length}} alumnos registrados</p>
            </div>
            <div class="row" style="margin-top: 20px;">
                <div class="container" style="overflow-y:auto ; height: 400px;">
                    <table class="table table-hover">
                        <thead>
                            <td>Clave</td>
                            <td>Nombre</td>
                            <td>Apellido</td>
                            <td>Grupo</td>
                        </thead>
                        <tbody>
                            {% for alumno in alumnos %}
                                <tr>
                                    <td>
                                        <a href="{% url 'alumno_detalle' pk=alumno.pk %}" class="btn btn-success">
                                            {{ alumno.clave }}
                                        </a>
                                    </td>
                                    <td>{{ alumno.nombre }}</td>
                                    <td>{{ alumno.apellido }}</td>
                                    <td>{{ alumno.grupo }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                
            </div>
        </div>
    </div>
</div>

 {% endblock %}